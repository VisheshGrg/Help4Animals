<% layout('layout/boilerplate') %>

<div class="container mt-5 mb-5">
    <h1 style="margin-bottom: 30px;">Active Rescues</h1>

    <form action="/rescue/animals" method="POST" class="mb-5">
        <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Location</span>
            <input type="text" class="form-control" placeholder="Enter location to search..." aria-label="Username" aria-describedby="basic-addon1" name="location" value="<%= location ? location:"" %>">
            <button class="btn btn-sm btn-secondary">Filter</button>
        </div>
    </form>

    <% for(let rescue of rescues) {%>
        <div class="card mb-5" style="height: auto;">
            <div class="row">
                <div class="col-md-4">
                    <% if(rescue.images.length>=1){ %>
                        <img class="img-fluid" style="width: 100%; height: 100%; object-fit: cover; max-height: 330px;" src="<%= rescue.images[0].url %>" alt="animal">
                    <% } else { %>
                        <img class="img-fluid" style="width: 100%; height: 100%; object-fit: cover; max-height: 330px;" src="https://t4.ftcdn.net/jpg/04/73/25/49/360_F_473254957_bxG9yf4ly7OBO5I0O5KABlN930GwaMQz.jpg" alt="no image">
                    <% } %>
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <div class="card-header">
                            <h3 class="card-title" style="margin-bottom: 15px; display: inline; margin-right: 10px;">Species: <%= rescue.species %></h3>
                            <% if(rescue.active){ %>
                                <span class="btn btn-sm btn-danger" style="display: inline;">Active</span>        
                            <% } else {%>
                                <span class="btn btn-sm btn-success" style="display: inline;">Rescued</span>
                            <% } %>
                        </div>
                        <div class="card-text" style="padding-left: 15px;">
                            <p style="margin-top: 10px;">
                                <small class="text-muted"><%= rescue.locality %></small>
                            </p>
                            <p><%= rescue.description %></p>
                            <!-- <p>
                                <i>Identification: <%= rescue.identification %></i>
                            </p> -->
                            <!-- <p>
                                <small>Caller contact: <%= rescue.callerContact %></small>
                            </p> -->
                        </div>
                        <div class="card-footer" style="width: 100%;">
                            <a class="btn btn-secondary" href="/rescue/<%= rescue._id %>/details">View details</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <% } %>
</div>